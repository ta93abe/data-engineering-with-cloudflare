# Data Engineering with Cloudflare

Cloudflareã®ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æ´»ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã™ã€‚

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ¦‚è¦](./docs/architecture-design.md) - Cloudflareãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®å…¨ä½“è¨­è¨ˆ
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³](./docs/architecture-diagrams.md) - Mermaidå½¢å¼ã®è¦–è¦šçš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ï¼ˆ9ç¨®é¡ï¼‰
- [Cloudflareã‚µãƒ¼ãƒ“ã‚¹ã‚«ã‚¿ãƒ­ã‚°](./docs/cloudflare-services-catalog.md) - å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®è©³ç´°ã¨ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã§ã®æ´»ç”¨æ–¹æ³•ï¼ˆ2025å¹´æœ€æ–°ç‰ˆï¼‰
- [å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆã‚¬ã‚¤ãƒ‰](./docs/external-services.md) - dbtã€dltã€DuckDBã€Evidence.devç­‰ã¨ã®é€£æºæ–¹æ³•
- [æƒ…å ±æºãƒªãƒ³ã‚¯é›†](./docs/resources.md) - å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãƒ–ãƒ­ã‚°ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒªã‚½ãƒ¼ã‚¹

## ğŸš€ Cloudflare ãƒ‡ãƒ¼ã‚¿ã‚µãƒ¼ãƒ“ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®Cloudflareã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã¾ã™ï¼š

### ã‚³ã‚¢åŸºç›¤
- **Workers**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯å¯¾å¿œï¼‰
- **Workflows**: è€ä¹…æ€§ã®ã‚ã‚‹å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆPythonå¯¾å¿œ âœ¨NEWï¼‰
- **Containers**: ãƒ•ãƒ«Linuxã‚³ãƒ³ãƒ†ãƒŠï¼ˆ2025å¹´6æœˆå…¬é–‹äºˆå®š ğŸš§ï¼‰

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **D1**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹SQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š âš¡ï¼‰
- **Workers KV**: ã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- **R2**: S3äº’æ›ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆã‚¨ã‚°ãƒ¬ã‚¹ç„¡æ–™ã€R2 SQLå¯¾å¿œ âœ¨NEWï¼‰
- **Vectorize**: ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆGA âœ¨NEWï¼‰
- **Hyperdrive**: PostgreSQL/MySQLæ¥ç¶šãƒ—ãƒ¼ãƒ«

### ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»AI
- **Pipelines**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ETLï¼ˆSQLå¤‰æ›å¯¾å¿œ âœ¨NEWï¼‰
- **Workers AI**: AIæ¨è«–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆ50+ãƒ¢ãƒ‡ãƒ«ï¼‰
- **AI Gateway**: AIåˆ¶å¾¡ãƒ»ç›£è¦–ãƒ—ãƒ¬ãƒ¼ãƒ³
- **Analytics Engine**: æ™‚ç³»åˆ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹DB

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆ
- **Queues**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹
- **R2 Event Notifications**: R2ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‡¦ç†ï¼ˆãƒ™ãƒ¼ã‚¿ ğŸ”µï¼‰
- **Durable Objects**: ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### ãã®ä»–
- **Calls**: WebRTCãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ï¼ˆãƒ™ãƒ¼ã‚¿ ğŸ”µï¼‰
- **Stream**: å‹•ç”»ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
- **Pages**: ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- **Browser Rendering**: ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆãƒ™ãƒ¼ã‚¿ ğŸ”µï¼‰

è©³ç´°ã¯[ã‚µãƒ¼ãƒ“ã‚¹ã‚«ã‚¿ãƒ­ã‚°](./docs/cloudflare-services-catalog.md)ã‚’ã”è¦§ãã ã•ã„ã€‚

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™

- ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«åˆ†æ•£ã•ã‚ŒãŸä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãªãƒ‡ãƒ¼ã‚¿åŸºç›¤ã®æ§‹ç¯‰
- ã‚³ã‚¹ãƒˆåŠ¹ç‡ã®é«˜ã„ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨å‡¦ç†
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ä¿¡é ¼æ€§ã®é«˜ã„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- é–‹ç™ºãƒ»é‹ç”¨ã®åŠ¹ç‡åŒ–

## ğŸ”§ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆ

Cloudflareã‚µãƒ¼ãƒ“ã‚¹ã¨çµ„ã¿åˆã‚ã›ã¦ã€ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã—ã¾ã™ï¼š

### ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»å‡¦ç†
- **dbt**: SQLãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»ãƒ¢ãƒ‡ãƒªãƒ³ã‚°
- **dlt**: Pythonãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºãƒ»ãƒ­ãƒ¼ãƒ‰ãƒ„ãƒ¼ãƒ«
- **DuckDB**: R2ä¸Šã®Parquet/Icebergãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ã‚¯ã‚¨ãƒª

### ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- **Apache Iceberg**: R2ä¸Šã§ã®ACIDãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¯¾å¿œãƒ†ãƒ¼ãƒ–ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–
- **Evidence.dev**: ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®BIãƒ„ãƒ¼ãƒ«ï¼ˆCloudflare Pagesã¸ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰

### CI/CDãƒ»é–‹ç™º
- **GitHub**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **GitHub Actions**: ETLãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è‡ªå‹•å®Ÿè¡Œãƒ»Workersè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

### é€šçŸ¥ãƒ»ç›£è¦–
- **Slack**: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œçµæœãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥

è©³ç´°ã¯[å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆã‚¬ã‚¤ãƒ‰](./docs/external-services.md)ã‚’ã”è¦§ãã ã•ã„ã€‚

## ğŸ“ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```mermaid
graph TB
    subgraph "Data Sources"
        API[External APIs]
        Events[User Events]
        DB[(External DBs)]
    end

    subgraph "Ingestion"
        dlt[dlt]
        Workers[Workers]
        Pipelines[Pipelines]
    end

    subgraph "Storage"
        R2[(R2 + Iceberg)]
        D1[(D1)]
        KV[(KV)]
    end

    subgraph "Transform"
        dbt[dbt + DuckDB]
        WorkersT[Workers]
    end

    subgraph "Analytics"
        Evidence[Evidence.dev]
        R2SQL[R2 SQL]
        Engine[Analytics Engine]
    end

    subgraph "Orchestration"
        GHA[GitHub Actions]
        WF[Workflows]
    end

    API --> dlt
    Events --> Workers
    Events --> Pipelines
    DB --> dlt

    dlt --> R2
    Workers --> D1
    Workers --> KV
    Workers --> Engine
    Pipelines --> R2

    R2 --> dbt
    D1 --> dbt
    dbt --> R2
    dbt --> D1

    R2 --> Evidence
    R2 --> R2SQL
    D1 --> Evidence
    Engine --> Evidence

    GHA --> dlt
    GHA --> dbt
    WF --> WorkersT

    Workers -.é€šçŸ¥.-> Slack[Slack]
    GHA -.é€šçŸ¥.-> Slack

    style Workers fill:#f96
    style R2 fill:#6cf
    style Evidence fill:#9f6
```

è©³ç´°ã¯[ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³](./docs/architecture-diagrams.md)ã‚’ã”è¦§ãã ã•ã„ï¼ˆ9ç¨®é¡ã®Mermaidå›³ã‚’æä¾›ï¼‰ã€‚

## ğŸ“– ã¯ã˜ã‚ã«

è©³ç´°ãªè¨­è¨ˆã¨å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã«ã¤ã„ã¦ã¯ã€[ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ¦‚è¦](./docs/architecture-design.md)ã‚’ã”è¦§ãã ã•ã„ã€‚

